"use strict";(self.webpackChunkluxsmile=self.webpackChunkluxsmile||[]).push([[128],{5128:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});var i=a(9060),n=a(8088),l=a(912),o=a(2496);function s(){const e=localStorage.getItem("jwToken"),[t,a]=(0,i.useState)([]),[s,c]=(0,i.useState)(!1),[r,d]=(0,i.useState)(!1),[m,h]=(0,i.useState)(null),[u,g]=(0,i.useState)(!1),[p,j]=(0,i.useState)(1),x=Math.ceil(t.length/10),[w,f]=(0,i.useState)({}),[S,N]=(0,i.useState)(!1),[y,v]=(0,i.useState)(null),[b,k]=(0,i.useState)({id:"",nume:"",functie:"",specialitate:"",img:null}),T=async t=>{if(e)try{const i=await fetch("http://localhost:8080/angajati/".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jwToken:e})}),n=await i.json();if("jwToken este invalid"===n.message)return void(window.location.href="http://localhost:3000/luxsmile#/login");const l=await Promise.all(n.results.map((async e=>{const t=await fetch("http://localhost:8080/src/database/img/".concat(e.img));if(!t.ok)throw new Error("Nu s-a putut prelua imaginea");const a=await t.blob(),i=URL.createObjectURL(a);return{...e,img:i}})));a(l)}catch(i){console.error("Eroare la trimiterea tokenului la server:",i)}else console.log("Nu exist\u0103 token \xeen localStorage."),window.location.href="http://localhost:3000/luxsmile#/login"},C=async()=>{if(e)try{const t=await fetch("http://localhost:8080/angajati",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jwToken:e})}),i=await t.json();if("jwToken este invalid"===i.message)return void(window.location.href="http://localhost:3000/luxsmile#/login");const n=await Promise.all(i.map((async e=>{const t=await fetch("http://localhost:8080/src/database/img/".concat(e.img));if(!t.ok)throw new Error("Nu s-a putut prelua imaginea");const a=await t.blob(),i=URL.createObjectURL(a);return{...e,img:i}})));a(n)}catch(t){console.error("Eroare la trimiterea tokenului la server:",t)}else console.log("Nu exist\u0103 token \xeen localStorage."),window.location.href="http://localhost:3000/luxsmile#/login"};(0,i.useEffect)((()=>{const e=localStorage.getItem("data");"all"===e?C():"Administratie"===e?T("Administratie"):"Medic Stomatolog"===e?T("Medic Stomatolog"):"Tehnician Dentar"===e?T("Tehnician Dentar"):"Asistent Medical"===e&&T("Asistent Medical"),j(localStorage.getItem("page"))}),[]);const A=t.slice(10*(p-1),10*p),I=(e,t)=>{e(t),localStorage.setItem("page",1)},E=e=>{const{name:t,value:a}=e.target;k({...b,[t]:a})};return(0,o.jsxs)("div",{className:"admin",children:[(0,o.jsxs)("header",{className:"logo",children:[(0,o.jsxs)("div",{className:"boxLogo",children:[(0,o.jsx)(n.c5Z,{className:"icon"}),(0,o.jsx)("h1",{children:"LuxSmile"})]}),(0,o.jsx)("button",{onClick:e=>{e.preventDefault(),localStorage.removeItem("jwToken"),localStorage.removeItem("data"),window.location.href="http://localhost:3000/luxsmile#/login"},children:"Log out"})]}),(0,o.jsxs)("main",{children:[(0,o.jsxs)("div",{className:"tools",children:[(0,o.jsx)("button",{className:"tool",onClick:()=>d(!0),children:"Adauga un angajat nou"}),(0,o.jsx)("button",{className:"tool",onClick:()=>{I(C),j(1),localStorage.setItem("data","all")},children:"Personal"}),(0,o.jsx)("button",{className:"subcategory",onClick:()=>{I(T,"Administratie"),j(1),localStorage.setItem("data","Administratie")},children:"Administra\u021bie"}),(0,o.jsx)("button",{className:"subcategory",onClick:()=>{I(T,"Medic Stomatolog"),j(1),localStorage.setItem("data","Medic Stomatolog")},children:"Medicii Stomatologi"}),(0,o.jsx)("button",{className:"subcategory",onClick:()=>{I(T,"Tehnician Dentar"),j(1),localStorage.setItem("data","Tehnician Dentar")},children:"Tehnicieni Dentari"}),(0,o.jsx)("button",{className:"subcategory",onClick:()=>{I(T,"Asistent Medical"),j(1),localStorage.setItem("data","Asistent Medical")},children:"Asisten\u021bi Medicali"})]}),(0,o.jsxs)("div",{className:"datas",children:[(0,o.jsxs)("table",{id:"employees",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"ID"}),(0,o.jsx)("th",{children:"Imagine"}),(0,o.jsx)("th",{children:"Nume"}),(0,o.jsx)("th",{children:"Specialitate"}),(0,o.jsx)("th",{children:"functie"})]})}),(0,o.jsx)("tbody",{children:A.map((t=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:t.id}),(0,o.jsx)("td",{children:(0,o.jsx)("img",{src:t.img,alt:t.img})}),(0,o.jsx)("td",{children:t.nume}),(0,o.jsx)("td",{children:t.specialitate}),(0,o.jsx)("td",{children:t.functie}),(0,o.jsxs)("td",{children:[(0,o.jsx)(l.uq9,{className:"icon",onClick:()=>(e=>{const t=A.find((t=>t.id===e));f(t),k({id:t.id,nume:t.nume,functie:t.functie,specialitate:t.specialitate}),v(e),c(!0)})(t.id)})," ",(0,o.jsx)(n.Om$,{className:"icon",onClick:()=>(async t=>{console.log(t);try{const a=await fetch("http://localhost:8080/angajati/delete/".concat(t),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({jwToken:e})}).then((e=>e.json())).then((e=>console.log(e)));if(window.location.reload(),!a.ok)throw new Error("Eroare la \u0219tergere");await a.json()}catch(a){console.error("Eroare la \u0219tergere:",a)}})(t.id)})]})]},t.id)))})]}),(0,o.jsxs)("div",{className:"page",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("button",{onClick:()=>{Number(p)>1&&(j(Number(p)-1),localStorage.setItem("page",Number(p)-1))},children:(0,o.jsx)(n.OYi,{className:"icon"})}),(0,o.jsx)("input",{type:"number",value:p,min:1,max:x,onChange:e=>{const t=e.target.value;j(t),localStorage.setItem("page",t)}}),(0,o.jsx)("button",{onClick:()=>{Number(p)<x&&(j(Number(p)+1),localStorage.setItem("page",Number(p)+1))},children:(0,o.jsx)(n.QNO,{className:"icon"})})]}),(0,o.jsxs)("p",{children:["Numarul maxim de pagini: ",x]})]})]})]}),s&&(0,o.jsx)("div",{className:"infoEmployeeBox",children:(0,o.jsxs)("div",{className:"infoEmployee",children:[(0,o.jsx)("img",{src:w.img,alt:"Employee img"}),(0,o.jsxs)("div",{className:"info",children:[(0,o.jsx)("input",{type:"file",accept:"image/*"}),(0,o.jsxs)("p",{children:["Nume: ",w.nume]}),S&&(0,o.jsx)("input",{type:"text",name:"nume",onChange:E,placeholder:w.nume}),(0,o.jsxs)("p",{children:["Functie: ",w.functie]}),S&&(0,o.jsxs)("select",{defaultValue:w.functie,name:"functie",onChange:E,children:[(0,o.jsx)("option",{value:"Administratie",children:"Administratie"}),(0,o.jsx)("option",{value:"Medic Stomatolog",children:"Medic Stomatolog"}),(0,o.jsx)("option",{value:"Tehnician Dentar",children:"Tehnician Dentar"}),(0,o.jsx)("option",{value:"Asistent Medical",children:"Asistent Medical"})]}),(0,o.jsxs)("p",{children:["Specialitate: ",w.specialitate]}),S&&(0,o.jsx)("input",{type:"text",name:"specialitate",onChange:E,placeholder:w.specialitate}),(0,o.jsx)("button",{onClick:()=>{c(!1),N(!1),document.location.reload()},children:"Inchide"}),(0,o.jsx)("button",{onClick:()=>N(!0),children:"Editeza"}),S&&(0,o.jsx)("button",{onClick:async()=>{if(e)try{const t=await fetch("http://localhost:8080/angajati/edit/".concat(b.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({jwToken:e,newData:{nume:b.nume,specialitate:b.specialitate,functie:b.functie}})});if("jwToken este invalid"===(await t.json()).message)return void(window.location.href="http://localhost:3000/luxsmile#/login");window.location.reload()}catch(t){console.error("Eroare la trimiterea tokenului la server:",t)}else console.log("Nu exist\u0103 token \xeen localStorage."),window.location.href="http://localhost:3000/luxsmile#/login"},children:"Trimite"})]})]})}),r&&(0,o.jsx)("div",{className:"addNewEmployee",children:(0,o.jsxs)("div",{className:"employeeData",children:[(0,o.jsxs)("div",{className:"addData",children:[(0,o.jsxs)("div",{children:[u&&(0,o.jsx)("p",{className:"alert",children:u}),(0,o.jsx)("p",{children:"Imagine:"}),(0,o.jsx)("input",{id:"newImg",type:"file",accept:"image/*",name:"img",onChange:e=>{const t=e.target.files[0],a=new FileReader;a.onload=e=>{const t=e.target.result;h(t),k({img:t})},a.readAsDataURL(t)}}),(0,o.jsx)("p",{children:"Nume: "}),(0,o.jsx)("input",{id:"newName",type:"text",name:"nume",onChange:E,placeholder:"Numele Prenume"}),(0,o.jsx)("p",{children:"Functie"}),(0,o.jsxs)("select",{id:"newFunction",name:"functie",defaultValue:"Selecteaza Functia",onChange:E,children:[(0,o.jsx)("option",{value:"Selecteaza Functia",children:"Selecteaza Functia"}),(0,o.jsx)("option",{value:"Administratie",children:"Administratie"}),(0,o.jsx)("option",{value:"Medic Stomatolog",children:"Medic Stomatolog"}),(0,o.jsx)("option",{value:"Tehnician Dentar",children:"Tehnician Dentar"}),(0,o.jsx)("option",{value:"Asistent Medical",children:"Asistent Medical"})]}),(0,o.jsx)("p",{children:"Specialitate"}),(0,o.jsx)("input",{id:"newSpecialty",type:"text",name:"specialitate",onChange:E,placeholder:"Specialitate"})]}),m&&(0,o.jsx)("img",{src:m,alt:"Preview"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("button",{onClick:async()=>{var t="Adaugati: ";if(null===b.img&&(t+="imagine; "),""===b.nume&&(t+="nume; "),""===b.functie&&(t+="functie; "),""===b.specialitate&&(t+="specialitate; "),"Adaugati: "===t)if(g(!1),e)try{const t=document.getElementById("newImg").files[0],a=b.specialitate+" "+b.nume+"_"+b.functie+".jpg",i=new File([t],a,{type:"image/jpg"}),n=new FormData;n.append("img",i,i.newName);const l=await fetch("http://localhost:8080/angajatNou",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jwToken:e,nume:b.nume,functie:b.functie,specialitate:b.specialitate})});if("jwToken este invalid"===(await l.json()).message)return void(window.location.href="http://localhost:3000/luxsmile#/login");const o=await fetch("http://localhost:8080/upload",{method:"POST",body:n}),s=await o.json();console.log(s),"Imagine \xeenc\u0103rcat\u0103 cu succes"===s.message&&(g("A fost creat un angajat nou"),setTimeout((()=>{document.location.reload()}),2e3))}catch(a){console.error("Eroare la trimiterea tokenului la server:",a)}else console.log("Nu exist\u0103 token \xeen localStorage."),window.location.href="http://localhost:3000/luxsmile#/login";else g(t)},children:"Salveaza"}),(0,o.jsx)("button",{onClick:()=>{d(!1),window.location.reload()},children:"Renunta"})]})]})})]})}}}]);
//# sourceMappingURL=128.ba353ac7.chunk.js.map